<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How To: Creating Donut Plots • theHUB</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How To: Creating Donut Plots">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0ZQ7494RM2"></script><script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
gtag('config', 'G-0ZQ7494RM2'); </script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">theHUB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-pagroup" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">PAGroup</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-pagroup">
<li><a class="dropdown-item" href="../articles/web_only/PAG_About.html">About</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/PAG_GroupMeetings.html">Group Meetings</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/PAG_GuidelinesAndPolicies.html">Guidelines &amp; Policies</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/PAG_ProfessionalDevelopment.html">Professional Development</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/PAG_HowILikeToBeMentored.html">How I Like to be Mentored</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/PAG_Onboarding.html">Onboarding</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Advanced Candidate Evaluation (ACE)</h6></li>
    <li><a class="dropdown-item" href="../articles/AdvancedCandidateEvaluation.html">ACE - Overview</a></li>
    <li><a class="dropdown-item" href="../articles/AdvancedCandidateEvaluation_questions.html">ACE - Base Questions</a></li>
    <li><a class="dropdown-item" href="../articles/AdvancedCandidateEvaluation_setup.html">ACE - Setup</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>GeoCoding</h6></li>
    <li><a class="dropdown-item" href="../articles/GeoCoding_DownloadShapeFiles.html">Downloading Shape Files</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>General</h6></li>
    <li><a class="dropdown-item" href="../articles/HowTo_Software.html">Our Software Stack</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-datasets" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Datasets</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-datasets">
<li><a class="dropdown-item" href="../articles/Datasets_PubliclyAvailable.html">Publicly Available Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/Datasets_CountryCurrency.html">Country and Currency Dataset</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-msuedw" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">MSUEDW</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-msuedw">
<li><a class="dropdown-item" href="../articles/EDW_dBeaverSetup.html">dBeaver Setup</a></li>
    <li><a class="dropdown-item" href="../articles/EDW_R-SQLsetup.html">R-SQL Setup</a></li>
    <li><a class="dropdown-item" href="../articles/EDW_Navigation.html">EDW Navigation</a></li>
    <li><a class="dropdown-item" href="../articles/EDW_SQLsnippetLibrary.html">SQL Snippet Library (In Progress)</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/emilioxavier/theHUB/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="http://x.com/exesposito" aria-label="Twitter (X)"><span class="fa fa-twitter"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>How To: Creating Donut Plots</h1>
            
            <h4 data-toc-skip class="date">Updated 20/Dec/2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/emilioxavier/theHUB/blob/main/vignettes/HowTo_DonutPlots.Rmd" class="external-link"><code>vignettes/HowTo_DonutPlots.Rmd</code></a></small>
      <div class="d-none name"><code>HowTo_DonutPlots.Rmd</code></div>
    </div>

    
    
<p>Donut<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;You can also spell donut as doughnut. Those unfamiliar
with these tasty concoctions, see the &lt;a href="https://en.wikipedia.org/wiki/Doughnut" class="external-link"&gt;Wikipedia entry&lt;/a&gt; or
visit your nearest &lt;a href=""&gt;donut shop&lt;/a&gt;. If you live in East
Lansing, I highly recommend &lt;a href="https://www.groovydonuts.com/" class="external-link"&gt;Groovy Donuts&lt;/a&gt;!&lt;/p&gt;'><sup>1</sup></a>
plots (also known as ring plots) are an efficient way to display data
that represents proportions of things within a dataset.</p>
<div class="section level2">
<h2 id="constructing-the-donut-plot-data">Constructing the Donut Plot Data<a class="anchor" aria-label="anchor" href="#constructing-the-donut-plot-data"></a>
</h2>
<p>Using the <a href="https://ggplot2.tidyverse.org/reference/mpg.html" class="external-link">mpg dataset</a>
from <a href="https://ggplot2.tidyverse.org/" class="external-link">ggplot2</a>, we will
explore the construction of the donut <code>data.frame</code>.</p>
<p>The <code>class</code> column will be used for facets.</p>
</div>
<div class="section level2">
<h2 id="custom-colour-palette">Custom Colour Palette<a class="anchor" aria-label="anchor" href="#custom-colour-palette"></a>
</h2>
<p>When creating a collection of donut plots in a facet it is important
to have the same colours assigned to the same segments for all donut
plots. Often, each donut plot does not always include the same
collection of segments. The following code ensures that the same
segment-colour combination is used for each donut plot.</p>
<pre><code><span><span class="va">custom.palette</span> <span class="op">&lt;-</span> <span class="va">msu.palette</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">custom.palette</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">all.donut.DATA</span><span class="op">$</span><span class="va">Categories</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>If a “named colour palette” is not provided, one is created from the
categories within the <code>donut.DATA</code> data.frame and the
provided <code>colour.palette</code> to ensure a consistent colour
palette is used for all donut plots.</p>
</div>
<div class="section level2">
<h2 id="donut-plot">Donut Plot<a class="anchor" aria-label="anchor" href="#donut-plot"></a>
</h2>
<p>library(tidyverse) library(theHUB)</p>
<p>data=mpg; category=“cyl”; facetBy=NULL; category.order=“count”;
category.count=NULL; r.inner=4; r.outer=6; levels.rev=FALSE;
layerBy=NULL; layer.order &lt;- c(“4”, “r”, “f”)</p>
</div>
<div class="section level2">
<h2 id="works">!!! works !!!!<a class="anchor" aria-label="anchor" href="#works"></a>
</h2>
<p>donut.DATA &lt;- make.donut.data(data=mpg, category=“cyl”,
facetBy=NULL, layerBy=NULL, category.order=“count”, category.count=NULL,
r.inner=4, r.outer=6, levels.rev=FALSE)
make.donut.plot(donut.DATA=donut.DATA, colour.palette=msu.palette,
label.col=“Labels.short”, facet.ncol=3)</p>
</div>
<div class="section level2">
<h2 id="works-1">!!! works !!!!<a class="anchor" aria-label="anchor" href="#works-1"></a>
</h2>
<p>donut.DATA &lt;- make.donut.data(data=mpg, category=“cyl”,
facetBy=“class”, layerBy=NULL, category.order=“count”,
category.count=NULL, r.inner=4, r.outer=6, levels.rev=FALSE)
make.donut.plot(donut.DATA=donut.DATA, colour.palette=msu.palette,
label.col=“Labels.short”, facet.ncol=3)</p>
</div>
<div class="section level2">
<h2 id="works-2">!!! works !!!!<a class="anchor" aria-label="anchor" href="#works-2"></a>
</h2>
<p>donut.DATA &lt;- make.donut.data(data=mpg, category=“cyl”,
facetBy=“class”, layerBy=“drv”, category.order=“category”,
layer.order=“descend”, category.count=NULL, r.inner=4, r.outer=6,
levels.rev=FALSE) make.donut.plot(donut.DATA=donut.DATA,
colour.palette=msu.palette, label.col=“Labels.short”, facet.ncol=3)</p>
</div>
<div class="section level2">
<h2 id="works-3">!!! works !!!!<a class="anchor" aria-label="anchor" href="#works-3"></a>
</h2>
<p>donut.DATA &lt;- make.donut.data(data=mpg, category=“cyl”,
facetBy=NULL, layerBy=“drv”, category.order=“category”,
layer.order=“descend”, category.count=NULL, r.inner=4, r.outer=6,
levels.rev=FALSE) make.donut.plot(donut.DATA=donut.DATA,
colour.palette=msu.palette, label.col=“Labels.short”, facet.ncol=3)</p>
</div>
<div class="section level2">
<h2 id="a-donut-plot-with-layers">A Donut Plot with Layers<a class="anchor" aria-label="anchor" href="#a-donut-plot-with-layers"></a>
</h2>
<p>data=mpg; category=“cyl”; facetBy=NULL; layerBy=“drv”;
category.order=“count”; layer.order=“descend”; category.count=NULL;
r.inner=4; r.outer=6; levels.rev=FALSE</p>
</div>
<div class="section level2">
<h2 id="faceted-donut-plots">Faceted Donut Plots<a class="anchor" aria-label="anchor" href="#faceted-donut-plots"></a>
</h2>
</div>
<div class="section level2">
<h2 id="faceted-donut-plots-with-layers">Faceted Donut Plots with Layers<a class="anchor" aria-label="anchor" href="#faceted-donut-plots-with-layers"></a>
</h2>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emilio Xavier Esposito.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
